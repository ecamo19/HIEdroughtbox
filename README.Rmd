---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# HIEdroughtbox

<!-- badges: start -->
<!-- badges: end -->

The goal of HIEdroughtbox is to facilitate the analysis of the data coming from
the [droughtbox located at the Hawkesbury Institute for the Environment](https://ecamo19.github.io/droughtbox_documentation/)

## Installation

You can install the development version of HIEdroughtbox from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("ecamo19/hie_dRoughtbox")
```

## Example


```{r libraries, message = FALSE,warning = FALSE}
library(HIEdroughtbox)
library(dplyr)
```

### Read droughtbox data

```{r example}
data <- read_hie_droughtbox_data("inst/extdata/acacia_aneura_25c.dat")
head(data)
```


### Visualize climatic conditions

```{r example_plot_climatic_controls, fig.height=20, fig.width=25}
plot_droughtbox_climatic_controls(data, cowplot = T)
```

### Visualize raw weights measured by the strains

```{r example_plot_raw_weights, fig.height=10, fig.width=15}
plot_strains_weights(data, show_strain = "all", 
                     time_breaks = "5 min", 
                     show_tare_group = TRUE)
```
#### Visualize some strains 

```{r example_plot_raw_weights_1_4, fig.height=10, fig.width=15}
plot_strains_weights(data, 
                     show_strain = c("strain_1", "strain_4"), 
                     time_breaks = "10 min",
                     show_tare_group = TRUE)
```

### Choose a range of data

```{r}
filtered_data <- filter_droughtbox_data(data, 
                       from_start_time = "13:10:00",
                       to_end_time = "15:10:00")

head(filtered_data)
```
```{r example_plot_weights_1_4_filtered_data, fig.height=10, fig.width=15}
plot_strains_weights(filtered_data, 
                     show_strain = c("strain_1", "strain_4"), 
                     time_breaks = "10 min",
                     show_tare_group = TRUE)
```

### Clean data

```{r}
clean_data <- 
    clean_droughtbox_data(filtered_data, 
                      remove_n_observations = 10, 
                      threshold = 0.2)

head(clean_data)
```
```{r example_plot_weights_all_cleaned_data, fig.height=10, fig.width=15}
plot_strains_weights(clean_data, 
                     show_strain = "all",
                     show_tare_group = FALSE)
```

